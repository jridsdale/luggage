#
# Package TSP Managed Mac.app
#
# Makefile generated by app2luggage.rb
# 110121, modified to include other components

include /usr/local/share/luggage/luggage.make

TITLE=tspmm
REVERSE_DOMAIN=com.tsp
PAYLOAD=\
	install-app2luggage-TSP_Managed_Mac.app\
	pack-usr-local-bin-dockutil\
	pack-usr-sbin-jamf\
	pack-MMAutoUpdate.scptd\
	pack-Library-LaunchDaemons-com.tspmm.update-daily.plist\
	pack-script-preflight\
	pack-script-postflight

install-app2luggage-TSP_Managed_Mac.app: l_Applications TSP_Managed_Mac.app.tar.bz2
	@sudo ${TAR} xjf TSP_Managed_Mac.app.tar.bz2 -C ${WORK_D}/Applications
	@sudo chown -R root:admin "${WORK_D}/Applications/TSP Managed Mac.app"

l_Application_Support_TSPManagedMacs: l_Library_Application_Support
	@sudo mkdir -p ${WORK_D}/Library/Application\ Support/TSP\ Managed\ Macs
	@sudo touch ${WORK_D}/Library/Application\ Support/TSP\ Managed\ Macs/update.log
	@sudo chown root:admin ${WORK_D}/Library/Application\ Support/TSP\ Managed\ Macs
	@sudo chmod -R 775 ${WORK_D}/Library/Application\ Support/TSP\ Managed\ Macs
	
pack-MMAutoUpdate.scptd: l_Application_Support_TSPManagedMacs
	@sudo ${DITTO} -V MMAutoUpdate.scptd ${WORK_D}/Library/Application\ Support/TSP\ Managed\ Macs/MMAutoUpdate.scptd
	@sudo chown -R root:admin ${WORK_D}/Library/Application\ Support/TSP\ Managed\ Macs/MMAutoUpdate.scptd
	@sudo chmod 755 ${WORK_D}/Library/Application\ Support/TSP\ Managed\ Macs/MMAutoUpdate.scptd
